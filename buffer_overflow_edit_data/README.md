# Buffer overflow to edit data

An innocent looking implementation of a bank interface, with a glaring
security flaw: when a client updates their pin number it can change their
bank balance!

 - [main.c on Netrun](https://lawlor.cs.uaf.edu/netrun/run?name=example_c&code=%23include%3Cstdio.h%3E%0D%0A%23include%3Cstring.h%3E%0D%0A%0D%0Astruct%20bank_account%20%7B%0D%0A%20%20char%20pin%5B5%5D%3B%0D%0A%20%20long%20balance%3B%0D%0A%7D%3B%0D%0A%0D%0Avoid%20get_balance%28struct%20bank_account%2A%20acc%29%20%7B%0D%0A%20%20printf%28%22Balance%3A%20%25ld.%25ld%5Cn%22%2C%20acc-%3Ebalance%2F100%2C%20acc-%3Ebalance%25100%29%3B%0D%0A%7D%0D%0A%0D%0Avoid%20update_pin%28struct%20bank_account%2A%20acc%29%20%7B%0D%0A%20%20printf%28%22enter%20your%20new%20pin%3A%5Cn%22%29%3B%0D%0A%20%20if%281%20%21%3D%20scanf%28%22%25s%22%2C%20acc-%3Epin%29%29%20%7B%0D%0A%20%20%20%20printf%28%22invalid%20pin%5Cn%22%29%3B%0D%0A%20%20%7D%0D%0A%7D%0D%0A%0D%0Avoid%20manage_account%28struct%20bank_account%2A%20acc%29%20%7B%0D%0A%20%20int%20option%20%3D%200%3B%0D%0A%20%20while%281%29%20%7B%0D%0A%20%20%20%20printf%28%22Very%20Secure%20Bank%3A%5Cn%5Ct1%3A%5Ctget%20balance%5Cn%5Ct2%3A%5Ctupdate%20pin%5Cn%5Ct0%3A%5Ctexit%5Cn%22%29%3B%0D%0A%20%20%20%20printf%28%22Enter%20an%20action%3A%5Cn%22%29%3B%0D%0A%20%20%20%20if%281%20%21%3D%20scanf%28%22%25d%22%2C%20%26option%29%29%20%7B%0D%0A%20%20%20%20%20%20printf%28%22invalid%20input%5Cn%22%29%3B%0D%0A%20%20%20%20%20%20continue%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20if%28option%20%3C%3D%200%20%7C%7C%20option%20%3E%202%29%20break%3B%0D%0A%0D%0A%20%20%20%20char%20pin%5B5%5D%3B%0D%0A%20%20%20%20printf%28%22enter%20your%20pin%3A%5Cn%22%29%3B%0D%0A%20%20%20%20if%281%20%21%3D%20scanf%28%22%25s%22%2C%20pin%29%29%20%7B%0D%0A%20%20%20%20%20%20printf%28%22invalid%20input%5Cn%22%29%3B%0D%0A%20%20%20%20%20%20continue%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20%0D%0A%20%20%20%20for%28int%20i%20%3D%200%3B%20i%20%3C%204%3B%20%2B%2Bi%29%20%7B%0D%0A%20%20%20%20%20%20if%28acc-%3Epin%5Bi%5D%20%21%3D%20pin%5Bi%5D%29%20%7B%0D%0A%20%20%20%20%20%20%20%20printf%28%22incorrect%20pin%3A%20%25s%5Cn%22%2C%20pin%29%3B%0D%0A%20%20%20%20%20%20%20%20continue%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20if%28option%20%3D%3D%201%29%20%7B%0D%0A%20%20%20%20%20%20get_balance%28acc%29%3B%0D%0A%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20update_pin%28acc%29%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%7D%0D%0A%0D%0Aint%20main%28%29%20%7B%0D%0A%20%20struct%20bank_account%20acc%3B%0D%0A%20%20strcpy%28acc.pin%2C%20%221234%22%29%3B%0D%0A%20%20acc.balance%20%3D%200%3B%0D%0A%20%20manage_account%28%26acc%29%3B%0D%0A%20%20return%200%3B%0D%0A%7D&lang=C&mach=skylake64&mode=main&input=1%0D%0A1234%0D%0A2%0D%0A1234%0D%0A1234%24%24%24%24%24%0D%0A1%0D%0A1234%0D%0A2%0D%0A1234%0D%0A1234%24%24%24%24%24%24%24%24%0D%0A1%0D%0A1234%0D%0A0&check_input=Input&linkwith=&foo_ret=long&foo_arg0=void&orun=Run&orun=Grade&ocompile=Optimize&ocompile=Warnings)
